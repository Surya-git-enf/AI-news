<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Search — SLIDE News</title>

<!-- Google Font for unique Slide -->
<link href="https://fonts.googleapis.com/css2?family=Russo+One&display=swap" rel="stylesheet">

<style>
/* ---------- Header heart (no background) ---------- */
.header-heart {
  display: inline-block;
  vertical-align: middle;
  margin-left: 100px;
  width: 28px;
  height: 28px;
  cursor: pointer; /* now clickable */
}

.header-heart .icon {
  /* Filled with gradient by default (no stroke) */
  fill: url(#feedLikeGradient);
  stroke: none;
  transform-origin: 50% 50%;
  transition: transform .18s ease, filter .18s ease;
}

/* gentle hover scale */
.header-heart:hover .icon { transform: scale(1.12); filter: drop-shadow(0 6px 16px rgba(130,45,160,0.18)); }

/* ---------- Page baseline styles ---------- */
  * { box-sizing: border-box; margin: 0; padding: 0; font-family: "Poppins", sans-serif; }
  body { background: #0a0a0a; color: #fff; height: 100vh; display: flex; flex-direction: column; overflow: hidden; }

/* ========== HEADER ========== */
  header {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 70px;
    display: flex;
    align-items: center;
    padding: 0 16px;
    gap: 12px;
    background: linear-gradient(90deg,#ff0080,#ff8c00,#40e0d0);
    border-bottom-left-radius: 20px;
    border-bottom-right-radius: 20px;
    z-index: 50;
    box-shadow: 0 4px 20px rgba(255,0,128,0.5);
  }

/* back button only contains the arrow — small clickable area */
  .back-btn {
    display: inline-flex;
    align-items: center;
    justify-content:center;
    width:46px;
    height:46px;
    border-radius:10px;
    cursor: pointer;
    flex: 0 0 auto;
    margin-right: 100px;
  }

  .back-btn svg { width: 26px; height: 26px; stroke: #fff; fill: none; stroke-width: 2.8; }

/* Title area separated from back button — not clickable */
  .title {
    font-family: 'Russo One', sans-serif;
    font-size: 26px;
    font-weight: 700;
    color: #fff;
    display:flex;
    align-items:center;
    gap:8px;
    user-select: none;
  }

/* ========== CHAT CONTAINER ========== */
  .chat-container {
    flex: 1;
    overflow-y: auto;
    padding: 90px 16px 120px; /* top padding to clear header */
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  .message { max-width: 80%; padding: 10px 14px; border-radius: 16px; line-height: 1.4; animation: fadeIn 0.3s ease-in; }
  .user { align-self: flex-end; background: #007aff; }
  .bot { align-self: flex-start; background: #222; color: #fff; }

  @keyframes fadeIn { from {opacity: 0; transform: translateY(10px);} to {opacity: 1; transform: translateY(0);} }

/* ========== INPUT BAR ========== */
  .input-bar { display: flex; align-items: center; background: #111; border-radius: 30px; padding: 10px 16px; margin: 16px; box-shadow: 0 0 12px rgba(0, 122, 255, 0.2); }
  .input-bar input { flex: 1; background: transparent; border: none; color: #fff; outline: none; font-size: 16px; padding-right: 10px; }
  .send-btn { background: #007aff; border: none; color: #fff; font-size: 20px; border-radius: 50%; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: background 0.2s; }
  .send-btn:hover { background: #005fd1; }
  ::placeholder { color: #aaa; opacity: 0.7; }

/* Scrollbar styling */
  ::-webkit-scrollbar { width: 6px; }
  ::-webkit-scrollbar-thumb { background: #444; border-radius: 3px; }

</style>
</head>
<body>

<!-- HEADER -->
<header>
  <!-- back button (only this area navigates) -->
  <div class="back-btn" id="backBtn" title="Back to feed">
    <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
      <path d="M15 18l-6-6 6-6" stroke-linecap="round" stroke-linejoin="round"></path>
    </svg>
  </div>

  <!-- Title + gradient heart icon (heart is clickable now) -->
  <span class="title" aria-label="Slide title">
    Slide
    <!-- Inline SVG heart — clickable and navigates to liked.html with email -->
    <svg id="searchHeart" class="header-heart" viewBox="0 0 24 24" width="28" height="28" aria-hidden="true" role="button" tabindex="0" title="Favorites">
      <defs>
        <!-- instagram-like gradient -->
        <linearGradient id="feedLikeGradient" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" stop-color="#f58529"/>
          <stop offset="50%" stop-color="#dd2a7b"/>
          <stop offset="100%" stop-color="#8134af"/>
        </linearGradient>
      </defs>

      <!-- Heart path: filled by default with gradient (no stroke) -->
      <path class="icon"
            d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5
               C2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09
               C13.09 3.81 14.76 3 16.5 3C19.58 3 22 5.42 22 8.5
               c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
    </svg>
  </span>
</header>

<!-- CHAT AREA -->
<div class="chat-container" id="chatContainer">
  <div class="message bot">👋 Hey there! I’m your news buddy. Type something to discover headlines!</div>
</div>

<!-- INPUT BAR -->
<div class="input-bar">
  <input id="userInput" type="text" placeholder="What’s the buzz today?" autocomplete="off" />
  <button class="send-btn" id="sendBtn" aria-label="Send">➤</button>
</div>

<script>
  // --- Get user email from query or localStorage (same pattern as other pages) ---
  const params = new URLSearchParams(window.location.search);
  const userEmail = params.get('email') || localStorage.getItem('userEmail') || '';

  // --- Heart click: animate heart itself and navigate to liked.html?email=... ---
  const searchHeart = document.getElementById('searchHeart');
  searchHeart.addEventListener('click', () => {
    // small pop animation on the svg element
    searchHeart.animate(
      [{ transform: 'scale(1)' }, { transform: 'scale(1.08)' }, { transform: 'scale(1)' }],
      { duration: 300, easing: 'ease-out' }
    );

    // build email param and navigate
    const emailParam = userEmail ? `?email=${encodeURIComponent(userEmail)}` : '';
    window.location.href = `liked.html${emailParam}`;
  });

  // Also allow keyboard activation (Enter/Space) for accessibility
  searchHeart.addEventListener('keydown', (e) => {
    if (e.key === 'Enter' || e.key === ' ') {
      e.preventDefault();
      searchHeart.click();
    }
  });

  // Back button click → navigate to previous page when possible; otherwise fallback to news.html with email
  document.getElementById('backBtn').addEventListener('click', () => {
    if (document.referrer && !document.referrer.includes('liked.html')) {
      // If the browser provides a referrer (and it's not liked.html), go there
      location.href = document.referrer;
      return;
    }
    if (history.length > 1) {
      history.back();
      return;
    }
    // final fallback: news.html with email if available
    const fallbackEmail = userEmail ? `?email=${encodeURIComponent(userEmail)}` : '';
    location.href = `news.html${fallbackEmail}`;
  });

  // Chat functionality
  const input = document.getElementById("userInput");
  const sendBtn = document.getElementById("sendBtn");
  const chatContainer = document.getElementById("chatContainer");

  const placeholders = [
    "What’s the buzz today?",
    "Search fresh headlines…",
    "Hot topic? I’ll fetch news.",
    "Type news, get updates!",
    "Uncover today’s big story.",
    "What’s trending, buddy?",
    "Let’s spot breaking news.",
    "Got a headline in mind?",
    "Pick a topic for news!",
    "Today’s scoop awaits you."
  ];

  let i = 0, charIndex = 0, typing = true;
  function typeAnimation() {
    const placeholder = placeholders[i];
    if (typing) {
      input.setAttribute("placeholder", placeholder.slice(0, charIndex++) + "▋");
      if (charIndex === placeholder.length + 1) {
        typing = false;
        setTimeout(() => typeAnimation(), 2000);
      } else setTimeout(typeAnimation, 80);
    } else {
      input.setAttribute("placeholder", placeholder);
      charIndex = 0;
      i = (i + 1) % placeholders.length;
      typing = true;
      setTimeout(typeAnimation, 2500);
    }
  }
  typeAnimation();

  function addMessage(text, sender = "user") {
    const msg = document.createElement("div");
    msg.className = `message ${sender}`;
    msg.textContent = text;
    chatContainer.appendChild(msg);
    chatContainer.scrollTop = chatContainer.scrollHeight;
  }

  sendBtn.onclick = async () => {
    const text = input.value.trim();
    if (!text) return;
    addMessage(text, "user");
    input.value = "";
    addMessage("Fetching news for you… 🔍", "bot");

    try {
      // mock / placeholder call — replace with your real search endpoint
      const response = await fetch("https://mock-api.example.com/search", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({ message: text })
      });

      const data = await response.json().catch(() => ({}));
      addMessage(data.reply || "✨ Here’s your mock response! (Replace URL for real data)", "bot");
    } catch (err) {
      addMessage("⚠️ Oops, failed to reach the server.", "bot");
    }
  };

  input.addEventListener("keypress", (e) => {
    if (e.key === "Enter") sendBtn.click();
  });
</script>

</body>
</html>